{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/devlog/terraform/2022-11-19-cloudneta-terraform-101-pt05-1","result":{"data":{"markdownRemark":{"id":"d6c08ef9-eb35-5f82-ac9e-7ecb5159105b","html":"<p>ì´ ë‚´ìš©ì€ CloudNet@ ì—ì„œ ì§„í–‰í•˜ëŠ” í…Œë¼í¼ ê¸°ì´ˆ ì…ë¬¸ ìŠ¤í„°ë””ì— ëŒ€í•œ ì—°ì¬ê¸€ì…ë‹ˆë‹¤.</p>\n<p>ìŠ¤í„°ë””ì—ì„œ ì‚¬ìš©í•˜ëŠ” êµì¬ëŠ” <a href=\"http://www.yes24.com/Product/Goods/101511312\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Terraform Up &#x26; Running 2nd Edition</a> ì…ë‹ˆë‹¤.</p>\n<hr>\n<h1 id=\"prerequisites\" style=\"position:relative;\"><a href=\"#prerequisites\" aria-label=\"prerequisites permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Prerequisites</h1>\n<ul>\n<li><a href=\"https://developer.hashicorp.com/terraform/language/expressions/types\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Terraform: Types and Values</a> ê³µì‹ë¬¸ì„œ\n<ul>\n<li>íƒ€ì…ê³¼ ê°’ì—ëŠ” ì–´ë–¤ ê²ƒë“¤ì´ ì‚¬ìš©ë  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">count</code>, <code class=\"language-text\">for_each</code> ëŠ” <code class=\"language-text\">resource</code> ë‚´ì—ì„œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n<li><code class=\"language-text\">for</code> í‘œí˜„ì‹ì€ ë³µì¡í•œ íƒ€ì…ì„ ë˜ë‹¤ë¥¸ ë³µì¡í•œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ”ë° ì“°ì…ë‹ˆë‹¤.</li>\n</ul>\n<p>ì•„ë˜ì—ì„œ 5ì£¼ì°¨ ìŠ¤í„°ë”” ë‚´ìš©ì„ ê³µìœ í•©ë‹ˆë‹¤.</p>\n<p>êµì¬ì˜ 5ì¥ ë‚´ìš©ì„ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤.</p>\n<h1 id=\"ë³¸ë¬¸\" style=\"position:relative;\"><a href=\"#%EB%B3%B8%EB%AC%B8\" aria-label=\"ë³¸ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë³¸ë¬¸</h1>\n<p>í…Œë¼í¼ì„ í†µí•´ ë§ˆì¹˜ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ë“¯ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì±•í„°ì—ì„œëŠ” ì•„ë˜ì˜ ë‚´ìš©ì„ í•™ìŠµí•  ì˜ˆì •ì…ë‹ˆë‹¤:</p>\n<ul>\n<li>ë°˜ë³µ, ì¡°ê±´ë¬¸ ì‚¬ìš©ë°©ë²•</li>\n<li>ë¬´ì¤‘ë‹¨ ë°°í¬ì— í•„ìš”í•œ ìš”ì†Œë“¤ ì‚¬ìš©ë°©ë²•</li>\n<li>ì£¼ì˜ì‚¬í•­</li>\n</ul>\n<h2 id=\"ë°˜ë³µë¬¸\" style=\"position:relative;\"><a href=\"#%EB%B0%98%EB%B3%B5%EB%AC%B8\" aria-label=\"ë°˜ë³µë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°˜ë³µë¬¸</h2>\n<p>í…Œë¼í¼ì´ ì œê³µí•˜ëŠ” ë°˜ë³µë¬¸ êµ¬ì„±ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>\n<ul>\n<li><code class=\"language-text\">count</code> êµ¬ë¬¸</li>\n<li><code class=\"language-text\">for_each</code> í‘œí˜„ì‹</li>\n<li><code class=\"language-text\">for</code> í‘œí˜„ì‹</li>\n<li><code class=\"language-text\">for</code> ë¬¸ìì—´ ì§€ì‹œì–´</li>\n</ul>\n<h3 id=\"count-êµ¬ë¬¸\" style=\"position:relative;\"><a href=\"#count-%EA%B5%AC%EB%AC%B8\" aria-label=\"count êµ¬ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">count</code> êµ¬ë¬¸</h3>\n<p><code class=\"language-text\">count</code> êµ¬ë¬¸ì„ ì‚¬ìš©í•œ ë°˜ë³µì— ëŒ€í•´ ì‚´í´ë´…ì‹œë‹¤.</p>\n<h4 id=\"count-êµ¬ë¬¸ì„-ì‚¬ìš©í•œ-ë°˜ë³µë¬¸-1\" style=\"position:relative;\"><a href=\"#count-%EA%B5%AC%EB%AC%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%B0%98%EB%B3%B5%EB%AC%B8-1\" aria-label=\"count êµ¬ë¬¸ì„ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">count</code> êµ¬ë¬¸ì„ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ (1)</h4>\n<p>IAM ì‚¬ìš©ìë¥¼ 3ëª… ìƒì„±í•˜ëŠ” ì˜ˆì‹œë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ëŠ” <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_user\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">aws_iam_user</code></a> ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. <code class=\"language-text\">name</code> í•„ë“œëŠ” Required ì…ë‹ˆë‹¤.</p>\n<p>ì „ì²´ ì˜ˆì‹œì½”ë“œëŠ” <code class=\"language-text\">chapter05/example01/count/index</code> ë””ë ‰í† ë¦¬ë¥¼ ì‚´í´ë´ì£¼ì„¸ìš”.</p>\n<ul>\n<li><code class=\"language-text\">iam.tf</code> íŒŒì¼ ì „ì²´</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">provider &quot;aws&quot; {\n  region = &quot;ap-northeast-2&quot;\n}\n\nresource &quot;aws_iam_user&quot; &quot;ch05-iam&quot; {\n  count = 3\n  # 0ë¶€í„° ì‹œì‘, 3ë²ˆ ë°˜ë³µí•©ë‹ˆë‹¤.\n  name  = &quot;s3ich4n.${count.index}&quot;\n}</code></pre></div>\n<ul>\n<li>ì´ ê²½ìš°, 0ë¶€í„° ì‹œì‘, 2ê¹Œì§€ ë°˜ë³µí•˜ëŠ” ì¸ë±ìŠ¤ ê°’ì„ ì¶”ê°€í•©ë‹ˆë‹¤.</li>\n<li><code class=\"language-text\">name</code> ê°’ì— ì¸ë±ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, 3ëª…ì˜ IAM ì‚¬ìš©ì ì´ë¦„ <strong>ì¤‘ë³µ</strong>ìœ¼ë¡œ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë°˜ë³µë¬¸ì˜ ì¸ë±ìŠ¤ê°’ì„ ì‚¬ìš©í•˜ì—¬ ê° ì‚¬ìš©ìì—ê²Œ ê³ ìœ í•œ ì´ë¦„ì„ ì‚¬ìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n</ul>\n<p>ì˜ˆì‹œë¥¼ êµ¬ë™í•´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">`$ terraform init\n\nInitializing the backend<span class=\"token punctuation\">..</span>.\n\nInitializing provider plugins<span class=\"token punctuation\">..</span>.\n- Finding latest version of hashicorp/aws<span class=\"token punctuation\">..</span>.\n- Installed hashicorp/aws v4.39.0 <span class=\"token punctuation\">(</span>signed by HashiCorp<span class=\"token punctuation\">)</span>\n\nTerraform has created a lock <span class=\"token function\">file</span> .terraform.lock.hcl to record the provider\nselections it made above. Include this <span class=\"token function\">file</span> <span class=\"token keyword\">in</span> your version control repository\nso that Terraform can guarantee to <span class=\"token function\">make</span> the same selections by default when\nyou run <span class=\"token string\">\"terraform init\"</span> <span class=\"token keyword\">in</span> the future.\n\nTerraform has been successfully initialized<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">(</span>ì¤‘ëµ<span class=\"token punctuation\">)</span>\n\n$ terraform apply\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[0] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"s3ich4n.0\"</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[1] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"s3ich4n.1\"</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[2] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"s3ich4n.2\"</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">3</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">0</span> to destroy.\n\nDo you want to perform these actions?\n  Terraform will perform the actions described above.\n  Only <span class=\"token string\">'yes'</span> will be accepted to approve.\n\n  Enter a value: <span class=\"token function\">yes</span>\n\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Creating<span class=\"token punctuation\">..</span>.\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Creating<span class=\"token punctuation\">..</span>.\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Creating<span class=\"token punctuation\">..</span>.\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Creation complete after 1s <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.1<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Creation complete after 1s <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.2<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Creation complete after 1s <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.0<span class=\"token punctuation\">]</span>\n\nApply complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">3</span> added, <span class=\"token number\">0</span> changed, <span class=\"token number\">0</span> destroyed.\n\n<span class=\"token comment\">#</span>\n<span class=\"token comment\"># ë°˜ë³µë¬¸ êµ¬ë™ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ì‚­ì œí•©ì‹œë‹¤.</span>\n<span class=\"token comment\">#</span>\n$ terraform destroy -auto-approve\n\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.2<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.0<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.1<span class=\"token punctuation\">]</span>\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  - destroy\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[0] will be destroyed</span>\n  - resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[1] will be destroyed</span>\n  - resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-iam[2] will be destroyed</span>\n  - resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-iam\"</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">0</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">3</span> to destroy.\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Destroying<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.2<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Destroying<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.0<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Destroying<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>s3ich4n.1<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Destruction complete after 1s\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Destruction complete after 1s\naws_iam_user.ch05-iam<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Destruction complete after 1s\n\nDestroy complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">3</span> destroyed.\n</code></pre></div>\n<p>0ë¶€í„° 2ê¹Œì§€ ë°˜ë³µë˜ì–´ ìœ ì € ì´ë¦„ì— ê°’ì´ ë¶™ì€ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<h4 id=\"count-êµ¬ë¬¸ì„-ì‚¬ìš©í•œ-ë°˜ë³µë¬¸-2\" style=\"position:relative;\"><a href=\"#count-%EA%B5%AC%EB%AC%B8%EC%9D%84-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%B0%98%EB%B3%B5%EB%AC%B8-2\" aria-label=\"count êµ¬ë¬¸ì„ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">count</code> êµ¬ë¬¸ì„ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ (2)</h4>\n<ul>\n<li>(ìŠ¤í¬) ìœ„í—˜í•œ ì½”ë“œì…ë‹ˆë‹¤! ì˜ëª»ì“°ê¸° ì‰¬ìš°ë‹ˆ, ì•„ë˜ ì£¼ì˜ì‚¬í•­ì„ ë°˜ë“œì‹œ ë³´ì„¸ìš”!</li>\n</ul>\n<p>ë§ˆì°¬ê°€ì§€ë¡œ, IAM ì‚¬ìš©ìë¥¼ 3ëª… ìƒì„±í•˜ëŠ” ì˜ˆì‹œë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. ë¦¬ì†ŒìŠ¤ëŠ” <a href=\"https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_user\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">aws_iam_user</code></a> ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. <code class=\"language-text\">name</code> í•„ë“œëŠ” Required ì…ë‹ˆë‹¤.</p>\n<p>ì „ì²´ ì˜ˆì‹œì½”ë“œëŠ” <code class=\"language-text\">chapter05/example01/count/list_and_default</code> ë””ë ‰í† ë¦¬ë¥¼ ì‚´í´ë´ì£¼ì„¸ìš”.</p>\n<ul>\n<li><code class=\"language-text\">variables.tf</code> íŒŒì¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">variable &quot;user_names&quot; {\n  description = &quot;Create IAM users with these names&quot;\n  # ë¬¸ìì—´ì„ ë‹´ëŠ” &quot;ë¦¬ìŠ¤íŠ¸&quot; íƒ€ì…ì…ë‹ˆë‹¤.\n  type        = list(string)\n  default     = [&quot;alice&quot;, &quot;bob&quot;, &quot;charlie&quot;]\n}</code></pre></div>\n<ul>\n<li><code class=\"language-text\">iam.tf</code> íŒŒì¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">provider &quot;aws&quot; {\n  region = &quot;ap-northeast-2&quot;\n}\n\nresource &quot;aws_iam_user&quot; &quot;ch05-ex01-count&quot; {\n  # ì´ëŸ° ì‹ìœ¼ë¡œ, user_namesë‚´ ë¦¬ìŠ¤íŠ¸ ê°’ì˜ ê¸¸ì´ë¥¼ ì•Œ ìˆ˜ ìˆì§€ìš”.\n  count = length(var.user_names)\n  name  = var.user_names[count.index]\n}</code></pre></div>\n<ul>\n<li><code class=\"language-text\">outputs.tf</code> íŒŒì¼</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">output &quot;first_arn&quot; {\n  # ì²«ë²ˆì§¸ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\n  value       = aws_iam_user.ch05-ex01-count[0].arn\n  description = &quot;The ARN for the first user&quot;\n}\n\noutput &quot;all_arns&quot; {\n  # ì „ì²´ ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ê±´ ì´ë ‡ê²Œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n  value       = aws_iam_user.ch05-ex01-count[*].arn\n  description = &quot;The ARNs for all users&quot;\n}</code></pre></div>\n<p>ì–´ë–¤ ì½”ë“œì¸ì§€ ê°œë…ì„ ì‚´í´ë´…ì‹œë‹¤.</p>\n<ul>\n<li>í…Œë¼í¼ì—ì„œëŠ” <code class=\"language-text\">count</code> ì™€ í•¨ê»˜ ë°°ì—´ ì¡°íšŒ êµ¬ë¬¸ê³¼ <a href=\"https://developer.hashicorp.com/terraform/language/functions/length\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">length</code> í•¨ìˆ˜</a> ë¥¼ ì‚¬ìš©í•´ì„œ ë°˜ë³µì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n<ul>\n<li>ë°°ì—´ ì¡°íšŒ êµ¬ë¬¸\n<ul>\n<li>ARRAY[<INDEX>]</li>\n<li>E.g., var.user_names ì˜ ì¸ë±ìŠ¤ <code class=\"language-text\">0</code>ì—ì„œ ìš”ì†Œë¥¼ ì°¾ëŠ” ë°©ë²•: <code class=\"language-text\">ch05-ex01-count[0]</code></li>\n<li>ì „ì²´ ê°’ì„ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•: <code class=\"language-text\">ch05-ex01-count[*]</code></li>\n</ul>\n</li>\n<li>length (ë‚´ì¥) í•¨ìˆ˜\n<ul>\n<li>length(<ARRAY>)</li>\n<li>ì£¼ì–´ì§„ ARRAY ì˜ í•­ëª© ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜. ë¬¸ìì—´ ë° ë§µì„ ëŒ€ìƒìœ¼ë¡œë„ ë™ì‘í•©ë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>ì´ ì˜ˆì œë¥¼ ìŠ¤ìŠ¤ë¡œ <code class=\"language-text\">terraform init &amp;&amp; terraform apply -auto-approve</code> í•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.\n(<code class=\"language-text\">-auto-approve</code> í”Œë˜ê·¸ëŠ”, ìë™ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹í•˜ë¼ëŠ” í‚¤ì›Œë“œì…ë‹ˆë‹¤.)</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ terraform init <span class=\"token operator\">&amp;&amp;</span> terraform apply -auto-approve\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[0] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[1] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[2] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">3</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">0</span> to destroy.\n\n<span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n\nApply complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">3</span> added, <span class=\"token number\">0</span> changed, <span class=\"token number\">0</span> destroyed.\n\nOutputs:\n\nall_arns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token string\">\"arn:aws:iam::240962124292:user/alice\"</span>,\n  <span class=\"token string\">\"arn:aws:iam::240962124292:user/bob\"</span>,\n  <span class=\"token string\">\"arn:aws:iam::240962124292:user/charlie\"</span>,\n<span class=\"token punctuation\">]</span>\nfirst_arn <span class=\"token operator\">=</span> <span class=\"token string\">\"arn:aws:iam::240962124292:user/alice\"</span></code></pre></div>\n<h4 id=\"count-ë¥¼-ì‚¬ìš©í•œ-ë°˜ë³µë¬¸ì˜-ì œì•½ì‚¬í•­\" style=\"position:relative;\"><a href=\"#count-%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EB%B0%98%EB%B3%B5%EB%AC%B8%EC%9D%98-%EC%A0%9C%EC%95%BD%EC%82%AC%ED%95%AD\" aria-label=\"count ë¥¼ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ì˜ ì œì•½ì‚¬í•­ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">count</code> ë¥¼ ì‚¬ìš©í•œ ë°˜ë³µë¬¸ì˜ ì œì•½ì‚¬í•­</h4>\n<p>ìœ„ì˜ ì˜ˆì œë¥¼ í†µí•´ ê³„ì •ì„ ë§Œë“¤ê³ , ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ í†µí•´ ì œì•½ì‚¬í•­ì„ ì‚´í´ë´…ì‹œë‹¤.</p>\n<ol>\n<li>\n<p>ì „ì²´ ë¦¬ì†ŒìŠ¤ë¥¼ ë°˜ë³µí•  ìˆ˜ëŠ” ìˆì§€ë§Œ ë¦¬ì†ŒìŠ¤ ë‚´ì—ì„œ ì¸ë¼ì¸ ë¸”ë¡ì„ ë°˜ë³µí•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œë¡œ ì‚´í´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">resource &quot;aws_autoscaling_group&quot; &quot;example&quot; {\n  launch_configuration = aws_launch_configuration.example.name\n  vpc_zone_identifier  = data.aws_subnets.default.ids\n  target_group_arns    = [aws_lb_target_group.asg.arn]\n  health_check_type    = &quot;ELB&quot;\n\n  min_size = var.min_size\n  max_size = var.max_size\n\n  tag {\n    key                 = &quot;Name&quot;\n    value               = var.cluster_name\n    propagate_at_launch = true\n  }\n}</code></pre></div>\n<ol>\n<li>ê°ê°ì˜ tag ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ <code class=\"language-text\">key</code>, <code class=\"language-text\">value</code>, <code class=\"language-text\">propagate_at_launch</code> ì— ëŒ€í•œ ê°’ìœ¼ë¡œ ìƒˆ ì¸ë¼ì¸ ë¸”ë¡ì„ ë§Œë“¤ì–´ì•¼ í•©ë‹ˆë‹¤.</li>\n<li>ë”°ë¼ì„œ <code class=\"language-text\">count</code> êµ¬ë¬¸ì„ ì‚¬ìš©í•´ì„œ ì´ëŸ¬í•œ íƒœê·¸ë¥¼ ë°˜ë³µí•˜ì—¬ ë™ì ì¸ ì¸ë¼ì¸ <code class=\"language-text\">tag</code> ë¸”ë¡ì„ ìƒì„±í•˜ë ¤ê³  ì‹œë„í•  ìˆ˜ë„ ìˆì§€ë§Œ, ì¸ë¼ì¸ ë¸”ë¡ ë‚´ì—ì„œëŠ” count ì‚¬ìš©ì€ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</li>\n</ol>\n</li>\n<li>\n<p>ì½”ë“œ ì¬ì‚¬ìš©ì‹œ <strong>ì¹˜ëª…ì ì¸</strong> ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì˜ˆì‹œë¡œ ì‚´í´ë´…ì‹œë‹¤.</p>\n<ul>\n<li><code class=\"language-text\">variables.tf</code></li>\n</ul>\n</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">variable &quot;user_names&quot; {\n  description = &quot;Create IAM users with these names&quot;\n  type        = list(string)\n  default     = [&quot;alice&quot;, &quot;charlie&quot;]\n}</code></pre></div>\n<ol>\n<li>\n<p>ë°°ì—´ì˜ ì¤‘ê°„ì— í•­ëª©ì„ ì œê±°í•˜ë©´ ëª¨ë“  í•­ëª©ì´ 1ì¹¸ì”© ì•ìœ¼ë¡œ ë‹¹ê²¨ì§ˆ ê²ƒì…ë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>í…Œë¼í¼ì€ ì¸ë±ìŠ¤ ë²ˆí˜¸ë¥¼ ë¦¬ì†ŒìŠ¤ ì‹ë³„ìë¡œ ë´…ë‹ˆë‹¤. ë”°ë¼ì„œ, â€˜ì¸ë±ìŠ¤ 1ì—ì„œëŠ” ê³„ì •ì„ ë§Œë“¤ê³ , ì¸ë±ìŠ¤2ì—ì„œëŠ” ë²„í‚·ì„ ì‚­ì œí•œë‹¤â€™ë¼ê³  í•´ì„í•©ë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ terraform plan\n\naws_iam_user.ch05-ex01-count<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>charlie<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-ex01-count<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>bob<span class=\"token punctuation\">]</span>\naws_iam_user.ch05-ex01-count<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span>: Refreshing state<span class=\"token punctuation\">..</span>. <span class=\"token punctuation\">[</span>id<span class=\"token operator\">=</span>alice<span class=\"token punctuation\">]</span>\n\nNote: Objects have changed outside of Terraform\n\nTerraform detected the following changes made outside of Terraform since the last <span class=\"token string\">\"terraform apply\"</span> <span class=\"token function\">which</span> may have affected this plan:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[0] has changed</span>\n  ~ resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">id</span>            <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n        name          <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n      + tags          <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token comment\"># (5 unchanged attributes hidden)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[1] has changed</span>\n  ~ resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">id</span>            <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n        name          <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n      + tags          <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token comment\"># (5 unchanged attributes hidden)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[2] has changed</span>\n  ~ resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">id</span>            <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n        name          <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n      + tags          <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token comment\"># (5 unchanged attributes hidden)</span>\n    <span class=\"token punctuation\">}</span>\n\n\n<span class=\"token punctuation\">(</span>plan ê²½ê³ ë¬¸ì€ ìƒëµ. í˜„ì¬ í…Œë¼í¼ ì½”ë“œë¡œëŠ” ì´ëŸ° ì‹ìœ¼ë¡œ í”„ë¡œë¹„ì €ë‹ ë  ê²ƒì´ë‹¤ í•˜ëŠ” ë‚´ìš©ì´ ì¨ì ¸ìˆìŠµë‹ˆë‹¤.<span class=\"token punctuation\">)</span>\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[1] will be updated in-place</span>\n  ~ resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">id</span>            <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n      ~ name          <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span> -<span class=\"token operator\">></span> <span class=\"token string\">\"charlie\"</span>\n        tags          <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n        <span class=\"token comment\"># (5 unchanged attributes hidden)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-ex01-count[2] will be destroyed</span>\n  <span class=\"token comment\"># (because index [2] is out of range for count)</span>\n  - resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-ex01-count\"</span> <span class=\"token punctuation\">{</span>\n      - arn           <span class=\"token operator\">=</span> <span class=\"token string\">\"arn:aws:iam::240962124292:user/charlie\"</span> -<span class=\"token operator\">></span> null\n      - force_destroy <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span> -<span class=\"token operator\">></span> null\n      - <span class=\"token function\">id</span>            <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span> -<span class=\"token operator\">></span> null\n      - name          <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span> -<span class=\"token operator\">></span> null\n      - path          <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span> -<span class=\"token operator\">></span> null\n      - tags          <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> -<span class=\"token operator\">></span> null\n      - tags_all      <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> -<span class=\"token operator\">></span> null\n      - unique_id     <span class=\"token operator\">=</span> <span class=\"token string\">\"AIDATQGTWHICFTYJYIOOQ\"</span> -<span class=\"token operator\">></span> null\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">0</span> to add, <span class=\"token number\">1</span> to change, <span class=\"token number\">1</span> to destroy.\n\nChanges to Outputs:\n  ~ all_arns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token comment\"># (1 unchanged element hidden)</span>\n        <span class=\"token string\">\"arn:aws:iam::240962124292:user/bob\"</span>,\n      - <span class=\"token string\">\"arn:aws:iam::240962124292:user/charlie\"</span>,\n    <span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">count</code> ì‚¬ìš© ì‹œ ëª©ë¡ ì¤‘ê°„ í•­ëª©ì„ ì œê±°í•˜ë©´ í…Œë¼í¼ì€ í•´ë‹¹ í•­ëª© ë’¤ì— ìˆëŠ” <strong>ëª¨ë“  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚­ì œ</strong>í•œ ë‹¤ìŒ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ë¥¼ ì²˜ìŒë¶€í„° ë‹¤ì‹œ ë§Œë“­ë‹ˆë‹¤â€¦ ğŸ˜±ğŸ˜±</p>\n</li>\n</ol>\n<h3 id=\"for_each-í‘œí˜„ì‹\" style=\"position:relative;\"><a href=\"#for_each-%ED%91%9C%ED%98%84%EC%8B%9D\" aria-label=\"for_each í‘œí˜„ì‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">for_each</code> í‘œí˜„ì‹</h3>\n<p><code class=\"language-text\">for_each</code> í‘œí˜„ì‹ì„ ì´ìš©í•œ ë°˜ë³µë¬¸ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤. ë¨¼ì € <code class=\"language-text\">for_each</code> í‘œí˜„ì‹ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">for_each</code> êµ¬ë¬¸ì€ í…Œë¼í¼ ë¬¸ë²•ì— ì •ì˜ëœ <code class=\"language-text\">meta-argument </code> ì…ë‹ˆë‹¤. ëª¨ë“ˆ, ëª¨ë“  ë¦¬ì†ŒìŠ¤ íƒ€ì…ì— ì‘ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n</li>\n<li>\n<p><code class=\"language-text\">list</code>, <code class=\"language-text\">set</code>, <code class=\"language-text\">map</code>ì„ ì‚¬ìš©í•˜ì—¬ ì „ì²´ ë¦¬ì†ŒìŠ¤ì˜ ë³µì‚¬ë³¸, ë¦¬ì†ŒìŠ¤ ë‚´ ì¸ë¼ì¸ ë¸”ë¡ì˜ ë³µì‚¬ë³¸, ëª¨ë“ˆì˜ ë³µì‚¬ë³¸ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¬¸ë²•ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤:</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">resource &quot;&lt;PROVIDER&gt;_&lt;TYPE&gt;&quot; &quot;&lt;NAME&gt;&quot; {\n  for_each = &lt;COLLECTION&gt;\n\n  [CONFIG ...]\n}</code></pre></div>\n<ul>\n<li>COLLECTION: ë£¨í”„ë¥¼ ì²˜ë¦¬í•  set, map ì„ ì˜ë¯¸</li>\n<li>CONFIG: ë¦¬ì†ŒìŠ¤ì™€ ê´€ë ¨ëœ í•˜ë‚˜ì´ìƒì˜ ì¸ìˆ˜\n<ul>\n<li><code class=\"language-text\">each.key</code>, <code class=\"language-text\">each.value</code> ë¡œ í‚¤/ë°¸ë¥˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"for_each-í‘œí˜„ì‹ì„-ì´ìš©í•œ-ì˜ˆì‹œ-1\" style=\"position:relative;\"><a href=\"#for_each-%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%98%88%EC%8B%9C-1\" aria-label=\"for_each í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">for_each</code> í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ (1)</h4>\n<p>ì „ì²´ ì˜ˆì‹œì½”ë“œëŠ” <code class=\"language-text\">chapter05/example01/for_each</code> ë””ë ‰í† ë¦¬ë¥¼ ì‚´í´ë´ì£¼ì„¸ìš”.</p>\n<ul>\n<li>\n<p><code class=\"language-text\">iam.tf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">provider &quot;aws&quot; {\n  region = &quot;ap-northeast-2&quot;\n}\n\nresource &quot;aws_iam_user&quot; &quot;ch05-foreach&quot; {\n  for_each = toset(var.user_names)\n  name     = each.value\n}</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">variables.tf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">variable &quot;user_names&quot; {\n  description = &quot;Create IAM users with these names&quot;\n  type        = list(string)\n  default     = [&quot;alice&quot;, &quot;bob&quot;, &quot;charlie&quot;]\n}</code></pre></div>\n</li>\n<li>\n<p><code class=\"language-text\">outputs.tf</code></p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">output &quot;all_users&quot; {\n  value = aws_iam_user.ch05-foreach\n}</code></pre></div>\n</li>\n</ul>\n<p><code class=\"language-text\">terraform init &amp;&amp; terraform apply -auto-approve</code> ë¥¼ í†µí•´, outputì— ë‚˜ì˜¤ëŠ” <code class=\"language-text\">for_each</code> ëŠ” ì–´ë–¤ì‹ì¸ì§€ ì‚´í´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ terraform init\n\n<span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n\n$ terraform apply -auto-approve\n\nTerraform used the selected providers to generate the following execution plan. Resource actions are indicated with the following symbols:\n  + create\n\nTerraform will perform the following actions:\n\n  <span class=\"token comment\"># aws_iam_user.ch05-foreach[\"alice\"] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-foreach\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-foreach[\"bob\"] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-foreach\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\"># aws_iam_user.ch05-foreach[\"charlie\"] will be created</span>\n  + resource <span class=\"token string\">\"aws_iam_user\"</span> <span class=\"token string\">\"ch05-foreach\"</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n      + name          <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\nPlan: <span class=\"token number\">3</span> to add, <span class=\"token number\">0</span> to change, <span class=\"token number\">0</span> to destroy.\n\nChanges to Outputs:\n  + all_users <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      + alice   <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n          + name                 <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      + bob     <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n          + name                 <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n      + charlie <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n          + name                 <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n      <span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n\nApply complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">3</span> added, <span class=\"token number\">0</span> changed, <span class=\"token number\">0</span> destroyed.\n\nOutputs:\n\nall_users <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string\">\"alice\"</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"arn\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"arn:aws:iam::REDACTED:user/alice\"</span>\n    <span class=\"token string\">\"force_destroy\"</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token string\">\"id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n    <span class=\"token string\">\"name\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"alice\"</span>\n    <span class=\"token string\">\"path\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span>\n    <span class=\"token string\">\"permissions_boundary\"</span> <span class=\"token operator\">=</span> tostring<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"tags\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span> /* of string */\n    <span class=\"token string\">\"tags_all\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"unique_id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"REDACTED\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token string\">\"bob\"</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"arn\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"arn:aws:iam::REDACTED:user/bob\"</span>\n    <span class=\"token string\">\"force_destroy\"</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token string\">\"id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n    <span class=\"token string\">\"name\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"bob\"</span>\n    <span class=\"token string\">\"path\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span>\n    <span class=\"token string\">\"permissions_boundary\"</span> <span class=\"token operator\">=</span> tostring<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"tags\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span> /* of string */\n    <span class=\"token string\">\"tags_all\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"unique_id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"REDACTED\"</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token string\">\"charlie\"</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"arn\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"arn:aws:iam::REDACTED:user/charlie\"</span>\n    <span class=\"token string\">\"force_destroy\"</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n    <span class=\"token string\">\"id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n    <span class=\"token string\">\"name\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"charlie\"</span>\n    <span class=\"token string\">\"path\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"/\"</span>\n    <span class=\"token string\">\"permissions_boundary\"</span> <span class=\"token operator\">=</span> tostring<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"tags\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span>null<span class=\"token punctuation\">)</span> /* of string */\n    <span class=\"token string\">\"tags_all\"</span> <span class=\"token operator\">=</span> tomap<span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token string\">\"unique_id\"</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"REDACTED\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code class=\"language-text\">all_users</code> ì¶œë ¥ ë³€ìˆ˜ê°€ <code class=\"language-text\">for_each</code> ì˜ í‚¤, ì¦‰ ì‚¬ìš©ì ì´ë¦„ì„ í‚¤ë¡œ ê°€ì§€ë©° ê°’ì´ í•´ë‹¹ ë¦¬ì†ŒìŠ¤ì˜ ì „ì²´ ì¶œë ¥ì¸ ë§µì„ í¬í•¨í•©ë‹ˆë‹¤.</p>\n<h4 id=\"for_each-í‘œí˜„ì‹ì„-ì´ìš©í•œ-ì˜ˆì‹œ-2-ì¸ë¼ì¸-ë¸”ë¡\" style=\"position:relative;\"><a href=\"#for_each-%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%98%88%EC%8B%9C-2-%EC%9D%B8%EB%9D%BC%EC%9D%B8-%EB%B8%94%EB%A1%9D\" aria-label=\"for_each í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ 2 ì¸ë¼ì¸ ë¸”ë¡ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for_each í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ (2): ì¸ë¼ì¸ ë¸”ë¡</h4>\n<ul>\n<li><a href=\"https://developer.hashicorp.com/terraform/tutorials/configuration-language/for-each\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">í•´ë‹¹ ë§í¬</a>ì˜ ì˜ˆì‹œë¥¼ ì°¸ì¡°í•˜ì˜€ìŠµë‹ˆë‹¤.</li>\n</ul>\n<h3 id=\"for-í‘œí˜„ì‹\" style=\"position:relative;\"><a href=\"#for-%ED%91%9C%ED%98%84%EC%8B%9D\" aria-label=\"for í‘œí˜„ì‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">for</code> í‘œí˜„ì‹</h3>\n<p>ë³µì¡í•œ íƒ€ì…ì„ ë˜ë‹¤ë¥¸ ë³µì¡í•œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ”ë° ì“°ì…ë‹ˆë‹¤. <code class=\"language-text\">for</code> í‘œí˜„ì‹ì€ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. (<a href=\"https://developer.hashicorp.com/terraform/language/expressions/for\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ê³µì‹ë§í¬</a>)</p>\n<h4 id=\"for-í‘œí˜„ì‹ì„-ì´ìš©í•œ-ì˜ˆì‹œ-1-ì»¨í…Œì´ë„ˆì—-ê°’ì„-ì¶”ê°€í•˜ê¸°\" style=\"position:relative;\"><a href=\"#for-%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%98%88%EC%8B%9C-1-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%88%EC%97%90-%EA%B0%92%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"for í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ 1 ì»¨í…Œì´ë„ˆì— ê°’ì„ ì¶”ê°€í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">for</code> í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ (1): ì»¨í…Œì´ë„ˆì— ê°’ì„ ì¶”ê°€í•˜ê¸°</h4>\n<p>list ë‚´ì˜ ëª¨ë“  ì´ë¦„ì„ ëŒ€ë¬¸ìë¡œ ë³€í™˜í•˜ëŠ” ì˜ˆì œë¥¼ í†µí•´ ì•Œì•„ë´…ì‹œë‹¤. ì‚¬ìš©ì€ ì•„ë˜ì™€ ê°™ì´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\"># ê²°ê³¼ë¥¼ list í˜•ì‹ìœ¼ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤.\n[for &lt;ITEM&gt; in &lt;LIST&gt; : &lt;OUTPUT&gt;]\n[for &lt;ITEM&gt; in &lt;LIST&gt; : &lt;OUTPUT&gt; if &lt;EXPRESSION&gt;] # ì¡°ê±´ë¬¸ ì ˆì—ì„œ ë‹¤ì‹œ ì‚´í´ë´…ì‹œë‹¤!\n\n# ê²°ê³¼ë¥¼ map í˜•ì‹ìœ¼ë¡œ ë¦¬í„´í•©ë‹ˆë‹¤.\n{for &lt;ITEM&gt; in &lt;LIST&gt; : &lt;OUTPUT_KEY&gt; =&gt; &lt;OUTPUT_VALUE&gt;}\n{for &lt;ITEM&gt; in &lt;LIST&gt; : &lt;OUTPUT_KEY&gt; =&gt; &lt;OUTPUT_VALUE&gt; if &lt;EXPRESSION&gt;} # ì¡°ê±´ë¬¸ ì ˆì—ì„œ ë‹¤ì‹œ ì‚´í´ë´…ì‹œë‹¤!</code></pre></div>\n<ul>\n<li>LIST: ë°˜ë³µí•  ë¦¬ìŠ¤íŠ¸</li>\n<li>ITEM: LISTì˜ ê° í•­ëª©ì— í• ë‹¹í•  ë³€ìˆ˜ì˜ ì´ë¦„</li>\n<li>OUTPUT: ITEMì„ ë³€í™˜í•œ í‘œí˜„ì‹</li>\n<li><code class=\"language-text\">if</code> êµ¬ë¬¸(optional): ì¡°ê±´(<code class=\"language-text\">&lt;EXPRESSION></code>)ì— ë§ìœ¼ë©´ ê°’ì„ ì¶”ê°€</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">variable &quot;names&quot; {\n  description = &quot;A list of names&quot;\n  type        = list(string)\n  default     = [&quot;alice&quot;, &quot;bob&quot;, &quot;charlie&quot;]\n}\n\noutput &quot;upper_names&quot; {\n  # names ì•ˆì˜ ê°’ì— ëŒ€í•´ ë°˜ë³µì„ ì§„í–‰í•˜ë©°, ê²°ê³¼ë¡œëŠ” upper(ì´ë¦„)ì˜ ê°’ì´ ë“¤ì–´ê°‘ë‹ˆë‹¤.\n  value = [for name in var.names : upper(name)]\n}\n\noutput &quot;short_upper_names&quot; {\n  # ì¡°ê±´ì„ ê¸°ì¬í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n  value = [for name in var.names : upper(name) if length(name) &lt; 6]\n}\n\nvariable &quot;prize_level&quot; {\n  description = &quot;map&quot;\n  type        = map(string)\n  default     = {\n    alice     = &quot;#1&quot;\n    bob       = &quot;#2&quot;\n    charlie   = &quot;#3&quot;\n  }\n}\n\noutput &quot;prize_status&quot; {\n  # prize_statusì˜ valueëŠ” í‚¤, ë°¸ë¥˜ ìŒì„ êº¼ë‚¸ ë¬¸ìì—´ì„ ë¦¬í„´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n  value = [for name, role in var.prize_level : &quot;\\${name} goes to \\${role} prize&quot;]\n}\n\noutput &quot;upper_prize_status&quot; {\n  # name, roleì— í•´ë‹¹í•˜ëŠ” mapì„ ë¦¬í„´í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n  value = {for name, role in var.prize_level : upper(name) =&gt; upper(role)}\n}</code></pre></div>\n<h4 id=\"for-í‘œí˜„ì‹ì„-ì´ìš©í•œ-ì˜ˆì‹œ-2-ë¬¸ìì—´ë¡œ-ë¦¬í„´í•˜ê¸°\" style=\"position:relative;\"><a href=\"#for-%ED%91%9C%ED%98%84%EC%8B%9D%EC%9D%84-%EC%9D%B4%EC%9A%A9%ED%95%9C-%EC%98%88%EC%8B%9C-2-%EB%AC%B8%EC%9E%90%EC%97%B4%EB%A1%9C-%EB%A6%AC%ED%84%B4%ED%95%98%EA%B8%B0\" aria-label=\"for í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ 2 ë¬¸ìì—´ë¡œ ë¦¬í„´í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">for</code> í‘œí˜„ì‹ì„ ì´ìš©í•œ ì˜ˆì‹œ (2): ë¬¸ìì—´ë¡œ ë¦¬í„´í•˜ê¸°</h4>\n<p>ì•ì„œì„œ ë¬¸ìì—´ ë‚´ì—ì„œ í…Œë¼í¼ ì½”ë“œë¥¼ ì°¸ì¡°í•˜ëŠ” ë³´ê°„ë²• ì˜ˆì‹œëŠ” ì‚¬ìš©í•´ë³¸ ì ì´ ìˆìŠµë‹ˆë‹¤. <code class=\"language-text\">\"Hello, ${var.name}!\"</code> ê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œìš”.</p>\n<p>ë¬¸ìì—´ ì§€ì‹œìë¥¼ ì‚¬ìš©í•˜ë©´, ë¬¸ìì—´ ë³´ê°„ì²˜ëŸ¼ <code class=\"language-text\">for</code> ë°˜ë³µë¬¸, <code class=\"language-text\">if</code> ì œì–´ë¬¸ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì‚´í´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\"># ë°˜ë³µë¬¸ì˜ ê¸°ë³¸ì…ë‹ˆë‹¤.\n%{ for &lt;ITEM&gt; in &lt;COLLECTION&gt; }&lt;BODY&gt;%{ endfor }\n\n# ì¸ë±ìŠ¤ë¥¼ ì¶”ê°€í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n%{ for &lt;INDEX&gt;, &lt;ITEM&gt; in &lt;COLLECTION&gt; }&lt;BODY&gt;%{ endfor }</code></pre></div>\n<ul>\n<li>COLLECTION: ë°˜ë³µí•  ë¦¬ìŠ¤íŠ¸, ë§µ. ë§ ê·¸ëŒ€ë¡œ ë°˜ë³µ ê°€ëŠ¥í•œ ì»¬ë ‰ì…˜ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.</li>\n<li>ITEM: ê° í•­ëª©ì— í• ë‹¹í•  ë¡œì»¬ ë³€ìˆ˜ì˜ ì´ë¦„ì…ë‹ˆë‹¤.</li>\n<li>BODY: ITEMì„ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” ê°ê°ì˜ ë°˜ë³µì„ ë Œë”ë§í•˜ëŠ” ëŒ€ìƒì…ë‹ˆë‹¤.</li>\n</ul>\n<p><a href=\"https://github.com/brikis98/terraform-up-and-running-code/blob/master/code/terraform/05-tips-and-tricks/loops-and-if-statements/live/global/string-directives/main.tf\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ì˜ˆì‹œ</a>ë¥¼ ë³´ë©´ì„œ í•¨ê»˜ ì‚´í´ë´…ì‹œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"terraform\"><pre class=\"language-terraform\"><code class=\"language-terraform\">variable &quot;names&quot; {\n  description = &quot;A list of names&quot;\n  type        = list(string)\n  default     = [&quot;alice&quot;, &quot;bob&quot;, &quot;charlie&quot;]\n}\n\noutput &quot;for_directive&quot; {\n  # ëì˜ endfor directiveê°€ ë¶™ëŠ”ë‹¤ëŠ” ì ì„ ì œì™¸í•˜ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ë“¯ í•©ë‹ˆë‹¤.\n  value = &quot;%{ for name in var.names }${name}, %{ endfor }&quot;\n}\n\noutput &quot;for_directive_index&quot; {\n  # íŒŒì´ì¬ì˜ enumerate() ì„ ì“°ë“¯ ì‚¬ìš©í•  ìˆ˜ë„ ìˆêµ°ìš”!\n  value = &quot;%{ for i, name in var.names }(${i}) ${name}, %{ endfor }&quot;\n}</code></pre></div>\n<p><code class=\"language-text\">terraform init &amp;&amp; terraform apply</code>ë¥¼ ìˆ˜í–‰í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ê°’ì„ ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ terraform init <span class=\"token operator\">&amp;&amp;</span> terraform apply\n\n<span class=\"token punctuation\">(</span>ìƒëµ<span class=\"token punctuation\">)</span>\n\nApply complete<span class=\"token operator\">!</span> Resources: <span class=\"token number\">0</span> added, <span class=\"token number\">0</span> changed, <span class=\"token number\">0</span> destroyed.\n\nOutputs:\n\nfor_directive <span class=\"token operator\">=</span> <span class=\"token string\">\"alice, bob, charlie, \"</span>\nfor_directive_index <span class=\"token operator\">=</span> <span class=\"token string\">\"(0) alice, (1) bob, (2) charlie, \"</span></code></pre></div>\n<h1 id=\"lessons-learned\" style=\"position:relative;\"><a href=\"#lessons-learned\" aria-label=\"lessons learned permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lessons Learned</h1>\n<p>ì œ 5ì¥ì—ì„œëŠ” ì•„ë˜ì˜ ë‚´ìš©ì„ ë°˜ë“œì‹œ ê¸°ì–µí•˜ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.</p>\n<ol>\n<li>\n<p>(ì¤‘ìš”!) Prerequisiteì—ì„œ, í…Œë¼í¼ì˜ íƒ€ì…ê³¼ ê°’ì— ëŒ€í•œ ë‚´ìš©ì€ ì´ë¯¸ ì•Œê³ ìˆì–´ì•¼ í•˜ëŠ” ì£¼ìš”í•œ ë‚´ìš©ì´ë¼ê³  ë´…ë‹ˆë‹¤.</p>\n<ol>\n<li>í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì²˜ëŸ¼ ë‹¤ë£¨ë ¤ë©´, ì–´ë–¤ íƒ€ì…ê³¼ ê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì•Œì•„ì•¼ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.</li>\n</ol>\n</li>\n<li>\n<p>ë°˜ë³µë¬¸ì˜ ì‚¬ìš©ë°©ë²•ê³¼ ì£¼ì˜ì‚¬í•­ì— ëŒ€í•´ ë°°ì› ìŠµë‹ˆë‹¤.</p>\n</li>\n<li>\n<p>ì¡°ê±´ë¬¸ì˜ ì‚¬ìš©ë°©ë²•ê³¼ ì£¼ì˜ì‚¬í•­ì— ëŒ€í•´ ë°°ì› ìŠµë‹ˆë‹¤.</p>\n</li>\n</ol>\n<p>ì´ê²ƒìœ¼ë¡œ ì œ 5ì¥, ë°˜ë³µë¬¸ ì„¤ëª…ì„ ë§ˆì¹©ë‹ˆë‹¤. ê¸´ ê¸€ ì½ì–´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</p>","fields":{"slug":"/devlog/terraform/2022-11-19---cloudneta-terraform-101-pt05-1//devlog/terraform/2022-11-19-cloudneta-terraform-101-pt05-1","tagSlugs":["/tag/terraform/","/tag/iac/","/tag/devops/"]},"frontmatter":{"date":"2022-11-16T03:37:57.000Z","description":"Terraformì˜ íƒ€ì…ê³¼ ê°’ì´ ì–´ë–»ê²Œ ì“°ì´ëŠ”ì§€ ì•Œê³ ìˆë‹¤ëŠ” ê°€ì • í•˜ì—, ë°˜ë³µë¬¸ê³¼ ì¡°ê±´ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë¡œì§ì„ í‘œí˜„í•˜ëŠ” ë°©ë²•ì„ ë‹´ì•˜ìŠµë‹ˆë‹¤. ê·¸ ì¤‘, ë°˜ë³µë¬¸ì„ ë¨¼ì € ì‚´í´ë´…ì‹œë‹¤.","tags":["terraform","iac","devops"],"title":"[CloudNet@] í…Œë¼í¼ ìŠ¤í„°ë”” 5ì£¼ì°¨ - Terraformì˜ ë°˜ë³µë¬¸ê³¼ ì¡°ê±´ë¬¸ (1) - ë°˜ë³µë¬¸","socialImage":{"publicURL":"/static/e002d5ded2f8cf0295be48fced9525bd/terraform05.jpg"}}}},"pageContext":{"slug":"/devlog/terraform/2022-11-19---cloudneta-terraform-101-pt05-1//devlog/terraform/2022-11-19-cloudneta-terraform-101-pt05-1"}},"staticQueryHashes":["251939775","357378587","401334301"]}