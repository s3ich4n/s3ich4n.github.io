{"componentChunkName":"component---src-templates-post-template-post-template-tsx","path":"/books/clean-code/2023-01-27-pt06","result":{"data":{"markdownRemark":{"id":"a05fd94c-5bd7-5fe9-859d-403c57c4d213","html":"<h1 id=\"6-객체와-자료-구조\" style=\"position:relative;\"><a href=\"#6-%EA%B0%9D%EC%B2%B4%EC%99%80-%EC%9E%90%EB%A3%8C-%EA%B5%AC%EC%A1%B0\" aria-label=\"6 객체와 자료 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 객체와 자료 구조</h1>\n<p><code class=\"language-text\">private</code> 값으로 쓰기로 한 변수에 대해 <code class=\"language-text\">public</code> 하게 마구잡이로 접근하는 것은, 캡슐화를 무색하게 만듭니다.</p>\n<h2 id=\"자료-추상화\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%A3%8C-%EC%B6%94%EC%83%81%ED%99%94\" aria-label=\"자료 추상화 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자료 추상화</h2>\n<h3 id=\"본문-내용\" style=\"position:relative;\"><a href=\"#%EB%B3%B8%EB%AC%B8-%EB%82%B4%EC%9A%A9\" aria-label=\"본문 내용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>본문 내용</h3>\n<p>구현을 외부로 노출하지 않고 철저히 숨깁시다. 인터페이스가 외부에 노출시키는 메소드를 통해 접근하도록 체계를 꾸립시다. 예시를 살펴봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 구체적으로 구현된 값입니다. 이를 바로 사용하지 말고...</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Point</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> x<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> y<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// ... 이런 식의 인터페이스를 상속하여, 구체적으로 구현한 클래스가 상속하게 합시다.</span>\n<span class=\"token comment\">// 극좌표계, 직교좌표계 모두 표현할 수 있도록 매핑되어있군요.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Point</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">double</span> <span class=\"token function\">getX</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">double</span> <span class=\"token function\">getY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">setCartesian</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span> x<span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">double</span> <span class=\"token function\">getR</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">double</span> <span class=\"token function\">getTheta</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">setPolar</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">double</span> r<span class=\"token punctuation\">,</span> <span class=\"token keyword\">double</span> theta<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>아래에 구현된 <code class=\"language-text\">Point</code> 인터페이스를 통해 구현하면, 상속받은 구현체는 직교좌표계로도, 극좌표계로도 사용할 수 있습니다. 두 좌표계 모두에 쓰이는 ‘Point’ 로서의 역할에 충실합니다. 유연하게 코드를 풀어낼 수 있지요.</p>\n<p>추상 인터페이스를 이용하여 사용자가 구현을 모른 채 자료의 핵심을 조작할 수 있어야 클래스로서의 가치를 합니다. 그저 메소드로 구현한다 하여 생기는 것이 아닙니다. 예시를 살펴봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// 추상 인터페이스가 갤런단위에 딱 묶여있습니다!</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Vehicle</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">double</span> <span class=\"token function\">getFuelTankCapacityInGallons</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">double</span> <span class=\"token function\">getGallonsOfGasoline</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 이를 풀어내봅시다.</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Vehicle</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">double</span> <span class=\"token function\">getPercentFuelRemaining</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"여기서-잠깐-파이썬이라면\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EA%B8%B0%EC%84%9C-%EC%9E%A0%EA%B9%90-%ED%8C%8C%EC%9D%B4%EC%8D%AC%EC%9D%B4%EB%9D%BC%EB%A9%B4\" aria-label=\"여기서 잠깐 파이썬이라면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>여기서 잠깐) 파이썬이라면?</h3>\n<p>언어 자체의 특징을 십분 활용하여 ’<em>하면 안되는 짓을 하지말자</em>’ 형식으로 구현할 수 있을 것입니다. 우선 파이썬에서의 특징 중 일부를 살펴보겠습니다.</p>\n<ul>\n<li>getter, setter를 두지 않고도 <strong>모든 멤버변수에 접근할 수 있습니다</strong>.\n<ul>\n<li><code class=\"language-text\">__</code> (밑줄 두개, double under)를 두면 <code class=\"language-text\">private</code> 처리를 하는 것이 아니라, 다른 이름으로 처리됩니다(<a href=\"https://peps.python.org/pep-0008/#method-names-and-instance-variables\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">참고링크</a>).</li>\n</ul>\n</li>\n<li>dynamic typing 입니다. 타입에 대한 제한은 ‘쓰기 나름’ 으로 두고, 타입 힌팅을 명확히 하여 제공하는 편이 좋겠습니다.</li>\n</ul>\n<p>이런 특징을 토대로 getter, setter를 파이썬스럽게 구현하는 방안은 여러가지가 있습니다. 관심있으시다면, <a href=\"https://realpython.com/python-getter-setter/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">참고링크</a>를 통해 보다 상세한 구현에 대해 확인해보시길 바랍니다.</p>\n<ol>\n<li>상속을 이용해, 전통적인 getter, setter를 두고 파이썬에서 원래 가능하던 멤버변수 접근에 대해 <code class=\"language-text\">Exception</code>을 발생시킵니다.</li>\n<li><code class=\"language-text\">@property</code> , <code class=\"language-text\">@x.setter</code> 데코레이터 활용 → 커스텀 로직을 넣고 클래스 내부의 값을 사용하여 보다 적극적으로 로직을 풀어낼 수 있습니다</li>\n<li>디스크립터 활용 → 2에서 반복되는 로직을 빼고 별도의 객체를 만듭니다. 이를 다른 클래스에서 사용하도록 합니다.</li>\n</ol>\n<h2 id=\"자료객체-비대칭\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%A3%8C%EA%B0%9D%EC%B2%B4-%EB%B9%84%EB%8C%80%EC%B9%AD\" aria-label=\"자료객체 비대칭 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자료/객체 비대칭</h2>\n<p>절차적 접근을 통한 코드와 객체적 접근을 통한 코드의 지향성을 살펴보고, 때에 따라 필요한 점을 잘 선택해야 함을 살펴봅시다.</p>\n<h3 id=\"절차적-접근법\" style=\"position:relative;\"><a href=\"#%EC%A0%88%EC%B0%A8%EC%A0%81-%EC%A0%91%EA%B7%BC%EB%B2%95\" aria-label=\"절차적 접근법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>절차적 접근법</h3>\n<p>각 도형들은 자료구조로서의 역할에 충실합니다. 동작 방식은 Geometry 클래스에서 구현합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Square</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Point</span> topLeft<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> side<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Point</span> topLeft<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> height<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> width<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Circle</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Point</span> center<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> radius<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Geometry</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">double</span> <span class=\"token constant\">PI</span> <span class=\"token operator\">=</span> <span class=\"token number\">3.141592</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Object</span> shape<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">NoSuchShapeException</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shape <span class=\"token keyword\">instanceof</span> <span class=\"token class-name\">Square</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Square</span> s <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Square</span><span class=\"token punctuation\">)</span>shape<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> s<span class=\"token punctuation\">.</span>side <span class=\"token operator\">*</span> s<span class=\"token punctuation\">.</span>side<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shape instance of <span class=\"token class-name\">Rectangle</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Rectangle</span> r <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Rectangle</span><span class=\"token punctuation\">)</span>shape<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> r<span class=\"token punctuation\">.</span>height <span class=\"token operator\">*</span> r<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>shape instance of <span class=\"token class-name\">Circle</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token class-name\">Circle</span> c <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Circle</span><span class=\"token punctuation\">)</span>shape<span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">return</span> <span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> c<span class=\"token punctuation\">.</span>radius <span class=\"token operator\">*</span> c<span class=\"token punctuation\">.</span>radius<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">NoSuchShapeException</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>만일 둘레를 구하는 등, <strong>새로운 기능</strong>을 추가하거나 <strong>새로운 도형</strong>을 추가하려면 Geometry에 속한 클래스를 <strong>모두</strong> 고쳐야합니다.</p>\n<p>반면 객체지향적 접근법이라면 새 함수를 추가하고 싶을 때 도형 클래스 전부를 고쳐야합니다[1].</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Square</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> topLeft<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">double</span> side<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> side <span class=\"token operator\">*</span> side<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Rectangle</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> topLeft<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">double</span> height<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">double</span> width<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> height <span class=\"token operator\">*</span> width<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Circle</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">Shape</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Point</span> center<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">double</span> radius<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">double</span> <span class=\"token constant\">PI</span> <span class=\"token operator\">=</span> <span class=\"token number\">3.141592</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">double</span> <span class=\"token function\">area</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token constant\">PI</span> <span class=\"token operator\">*</span> radius <span class=\"token operator\">*</span> radius<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>둘은 상호보완적입니다. 장단점을 비교해봅시다.</p>\n<ul>\n<li>자료구조에 대한 관점에서 보았을 때\n<ul>\n<li>절차적 코드\n<ul>\n<li>기존 자료구조를 변경하지 않으면서 새 함수를 추가하기 쉽습니다.</li>\n<li>새로운 함수를 추가하기 어렵습니다. 그러려면 모든 클래스를 고쳐야 합니다.</li>\n</ul>\n</li>\n<li>객체 지향 코드\n<ul>\n<li>기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽습니다</li>\n<li>새로운 자료구조를 추가하기 어렵습니다. 그러려면 모든 함수를 고쳐야 합니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>살펴보았듯 아래와같이 요약할 수 있습니다.</p>\n<ul>\n<li>객체 지향 코드에서 어려운 변경은 절차적인 코드에서 쉬우며, 절차적인 코드에서 어려운 변경은 객체 지향 코드에서 쉽습니다.</li>\n<li>새로운 자료 타입이 필요한 경우에는 클래스와 객체 지향 기법이 적합합니다. 반면 새로운 함수가 필요한 경우라면 절차적 코드와 자료구조가 좀 더 적합합니다.</li>\n</ul>\n<p>때에 따라 잘 풀어나갑시다. 언어가 지향하는 바를 계속 공부해보고 이를 적용하는 식으로 짜면 되지 않을까 합니다. 멀티 패러다임 언어가 나타나는 이유는, 이러한 바를 토대로 필요한 패러다임을 쓰라는 배려가 아닐까 합니다.</p>\n<h2 id=\"디미터-법칙\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%AF%B8%ED%84%B0-%EB%B2%95%EC%B9%99\" aria-label=\"디미터 법칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디미터 법칙</h2>\n<p>디미터 법칙(Law of Demeter)은 실용주의 프로그래머에서 소개된 하나의 지침이자 휴리스틱입니다. 모듈은 자신이 조작하는 객체의 속사정을 몰라야 한다 라는 내용을 가지고 있습니다. 객체는 자료를 숨기고 함수를 공개하지요. 그렇지 않다는 것은 내부 구조가 드러난다는 뜻입니다.</p>\n<p>디미터 법칙은 “클래스 C의 메소드 f는 다음과 같은 객체의 메소드만 호출하라” 라는 뜻입니다.</p>\n<ul>\n<li>클래스 C</li>\n<li>f 가 생성한 객체</li>\n<li>f 인수로 넘어온 객체</li>\n<li>C 인스턴스 변수에 저장된 객체</li>\n</ul>\n<p>위 객체에서 허용된 메소드가 반환하는 객체의 메소드는 호출하면 안 됩니다. 이런식의 코드가, 저자의 관점에서 좋지 못한 예시가 되겠습니다.</p>\n<p><code class=\"language-text\">final string outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath();</code></p>\n<p>이런 코드를 기차 충돌(train wrack)이라고 부른다고 합니다. 아래와 같은 방향으로 나누는 편을 권장합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Options</span> opts <span class=\"token operator\">=</span> ctxt<span class=\"token punctuation\">.</span><span class=\"token function\">getOptions</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token class-name\">File</span> scratchDir <span class=\"token operator\">=</span> opts<span class=\"token punctuation\">.</span><span class=\"token function\">getScratchDir</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> outputDir <span class=\"token operator\">=</span> scratchDir<span class=\"token punctuation\">.</span><span class=\"token function\">getAbsolutePath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>타고 들어가며 얻는 자료구조가 많군요. 이 코드를 쓰는 함수는 많은 객체를 탐색할 줄 안다는 말입니다. 디미터 법칙을 위반하는지 살펴보려면 <code class=\"language-text\">ctxt</code>, <code class=\"language-text\">Options</code>, <code class=\"language-text\">ScratchDir</code>이 객체인지 자료구조인지에 따라 달려있습니다. 객체라면 숨기고, 자료구조라면 내어놓는 편이 좋으니까요.</p>\n<h3 id=\"잡종-구조\" style=\"position:relative;\"><a href=\"#%EC%9E%A1%EC%A2%85-%EA%B5%AC%EC%A1%B0\" aria-label=\"잡종 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>잡종 구조</h3>\n<p>이렇게 섞이면 절차적, 객체지향적 개념이 모두 들어가게되고 성급하게 설계하면 둘의 장점만을 취하는 최악의 경우가 생길 것입니다. 이런 구조는 되도록이면 피하는 것이 좋습니다.</p>\n<h3 id=\"구조체-감추기\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%EC%A1%B0%EC%B2%B4-%EA%B0%90%EC%B6%94%EA%B8%B0\" aria-label=\"구조체 감추기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>구조체 감추기</h3>\n<p>위의 예시 코드를 조금 살펴보면 객체에게 뭔가 하라고 메시지를 주는 편이 좋겠습니다. 맥락을 살펴보니 같은 모듈에서 이 코드를 사용하는 이유가, 추상화 수준을 섞어놓은것이 그 이유였습니다. 그렇다면 적절한 객체에게 작업을 위임하는 것은 어떨까요? 내부구조를 드러내지 않고, 동시에 자신이 몰라도 되는 값이 알아서 처리하게 해주면 될 것입니다.</p>\n<h2 id=\"자료-전달-객체\" style=\"position:relative;\"><a href=\"#%EC%9E%90%EB%A3%8C-%EC%A0%84%EB%8B%AC-%EA%B0%9D%EC%B2%B4\" aria-label=\"자료 전달 객체 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>자료 전달 객체</h2>\n<p>위에서 살펴본 자료 구조체는 DTO(Data Transfer Object) 라고도 부르기도 합니다. DB와 통신하거나 소켓에서 받은 메시지의 구문을 분석할 때 유용합니다. 흔히 DB에 저장된 가공되지 않은 정보를 앱 단에서 사용할 객체로 변환할 때 맨 먼저 사용합니다.</p>\n<h3 id=\"활성-레코드\" style=\"position:relative;\"><a href=\"#%ED%99%9C%EC%84%B1-%EB%A0%88%EC%BD%94%EB%93%9C\" aria-label=\"활성 레코드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>활성 레코드</h3>\n<p>DTO의 특수한 경우입니다. save(), find() 까지 함께 제공합니다. 이 활성 레코드는 DB 테이블이나 다른 소스에서 자료를 직접 변환합니다. 이는 자료구조로 취급하는 것이 마땅합니다. 비즈니스 규칙을 담으면서 내부자료를 숨기는 객체를 따로 생성할 필요가 있습니다.</p>\n<h2 id=\"결론\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EB%A1%A0\" aria-label=\"결론 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>결론</h2>\n<p>객체는 동작을 공개하고 자료를 숨깁니다. 그래서 기존 동작을 변경하지 않으면서 새 객체 타입을 추가하기 쉽습니다. 하지만 기존 객체에 새 동작을 추가하기는 어렵습니다.</p>\n<p>자료 구조는 별 동작 없이 자료를 노출합니다. 그래서 기존 자료 구조에서 새 동작을 추가하기는 쉽습니다. 하지만 기존 함수에 새 자료 구조를 추가하기는 어렵습니다.</p>\n<p>따라서 어떤 시스템을 구현할 때, 새로운 자료 타입을 추가하는 유연성이 필요하다면 객체가 더 적합합니다. 그렇지만 새로운 동작을 추가하는 유연성이 필요하면 자료구조와 절차적 코드가 더 적합합니다.</p>\n<hr>\n<p>References</p>\n<ul>\n<li>[1]: <a href=\"https://en.wikipedia.org/wiki/Visitor_pattern\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">VISITOR 패턴</a>을 활용하여 풀어낼 수도 있지만, 이런 기법 또한 내부 구조가 VISITOR에 열리게됩니다. 캡슐화 위반이지요. 그리고 상기 살펴본 절차적 프로그램에서 볼 수 있는 구조가 반환됩니다.</li>\n</ul>","fields":{"slug":"/books/clean-code/2023-01-27---chapter06//books/clean-code/2023-01-27-pt06","tagSlugs":["/tag/book-review/","/tag/code-quality/"]},"frontmatter":{"date":"2023-01-27T23:11:00.000Z","description":"2023년 1월부터 시작한 클린 코드 독파 스터디 후, 매 모임 전 준비하는 게시글을 공유합니다. 이 글은 6장, 객체와 자료 구조에 대해 설명합니다.","tags":["book_review","code_quality"],"title":"클린 코드 스터디 (6): 객체와 자료구조","socialImage":{"publicURL":{"publicURL":"/static/483b84108696f21f6329d1cecf5d8a3f/water.jpg"}}}}},"pageContext":{"slug":"/books/clean-code/2023-01-27---chapter06//books/clean-code/2023-01-27-pt06"}},"staticQueryHashes":["251939775","357378587","401334301"]}