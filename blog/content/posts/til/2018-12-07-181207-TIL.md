---
layout: post
title: "Today I Learned: 7th Dec, 2018"
categories: til
tags: [TIL, Django, FE]
---

# 181207 일하면서 배운 것

오늘은 아래의 요소들을 배울 수 있었습니다.

# DB테이블 수정이 필요해졌다!

요구사항에 맞지 않게 개발했던 실수를 만회하고자 여러 질문을 했는데, 다음과 같이 재조정되었다.

1. 이메일 전송범위 줄이기. 요구사항에 맞게 다시 작성하자.
2. form은 이메일 양식만 맞추면 구독가능
	* 1계정, 1구독으로.
	* 추가) alias

제안받은 추가사항:
>alias mail 주소로도 가능하게 하려면 본인이외에도 추가 가능하게 하는게 좋을 것 같습니다(이건 제 생각) 대신 추가된 이메일 주소를 누가 했는지를 남기면 될 것 같구요

—

* 회원가입하면 그냥 입력해도 입력한 이메일로 회원가입이 된다.
	* 회원가입시 email을 안받게 비워버리면? -> 회원가입이 안됨.
		* 만약 email란을 비우면 회원가입이 안됨.
		* 그게 아니라면 어떻게 둘이 같은 아이디인지 비교대조 가능한가?
			* 그냥 회원가입하면 이메일을 입력함.
				그냥 회원가입할 때 입력한 이메일 주소로 인증메일 보냄
			* 소셜로그인을 하면 이메일을 치고 들어감.
				* 그걸통해...
					* user social auth에 등록됨.
					* seongeun.yu@deliveryhero.co.kr로 자동등록됨.
					* 이름이 유성은, 성은 Yu로 바뀜.
				* 따라서 둘이 동일계정임을 찾는거는 `User`의 이메일이다.
					


따라서 구독받을 이메일을 따로 저장해야한다. 회원가입용 이메일과 구독용 이메일은 다르다고 설정하면 될 문제다. 즉 Subscriber에 해당 컬럼을 추가하면 될 것이다.

ps. 사실 처음에도 개발범위가 상당히 애매했지만, 내가 그걸 물어본 적이 없어서 명확해지지 않았다. 다음부턴 계속적인 이슈 트래킹으로 이를 구체화한 후 개발해야 할 것이다.

# 프론트엔드: Form 태그에서의 `Enter` 키 입력에 대하여

지금 처리한 방식은 굉장히 원시적일지도 모른다. 하지만 `돌아가기` 때문에 기록으로 남긴다. 더 효과적이라면 이 방식이 반드시 deprecated 되겠지만...

```HTML
<script>
    const ENTER_PRESSED = 13;

    $('#subscribe-prompt').keypress(function (event) {
        if (event.which === ENTER_PRESSED) {
            event.preventDefault();
            subscribe_email_checker();
        }
    });
</script>
```
